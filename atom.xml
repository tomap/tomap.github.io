<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Thomas Piart - tp√Æ.eu</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://tp√Æ.eu/"/>
  <updated>2019-06-21T00:00:00.000Z</updated>
  <id>https://tp√Æ.eu/</id>
  
  <author>
    <name>Thomas Piart</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>IDN and browser support 2</title>
    <link href="https://tp√Æ.eu/2019/06/21/IDN-and-browser-support-2/"/>
    <id>https://tp√Æ.eu/2019/06/21/IDN-and-browser-support-2/</id>
    <published>2019-06-21T00:00:00.000Z</published>
    <updated>2019-06-21T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>This post is about IDN (International Domain Names) and browser support in 2019, 5 years after the previous one. And hopefully, I‚Äôll publish this one faster than the previous one.</p><h2>Android</h2><p>In 2019, Android has a lot of browser, but I only looked at a few of them:</p><h3>Chrome</h3><p>Perfect</p><img src="https://farm8.staticflickr.com/7870/39914433873_6701d6c2ee.jpg" width="281" alt="Chrome android"><h3>Firefox</h3><p>Perfect</p><img src="https://farm8.staticflickr.com/7811/39914433853_c2fdbcc26b.jpg" width="281" alt="Firefox android"><h3>Edge</h3><p>Perfect</p><img src="https://farm5.staticflickr.com/4821/39914433893_4659582ca0.jpg" width="281" alt="Edge android"><h3>DuckDuckGo</h3><p>Not properly displayed (Yes, they have a browser)</p><img src="https://farm8.staticflickr.com/7872/39914433903_e942069b9a.jpg" width="281" alt="DuckDuckGo android"><p>It‚Äôs even worse, if you type only ‚Äòtp√Æ.eu‚Äô, you get redirected to the search engine, not the famous site. You need to type the full https://<br>But I get it, for a privacy oriented browser, it‚Äôs probably more important to prevent phishing than to play nice with IDN</p><h2>iOS</h2><p>Tests were done on an iPad.</p><h3>Safari</h3><p>Perfect</p><img src="https://farm5.staticflickr.com/4902/39914426553_2d3bd71a71_z.jpg" width="480" alt="Safari iPad"><h3>Chrome</h3><p>Perfect</p><img src="https://farm5.staticflickr.com/4871/39914426593_afe40e311d_z.jpg" width="480" alt="Chrome ipad"><h3>Firefox</h3><p>Not properly displayed</p><img src="https://farm5.staticflickr.com/4828/39914426573_44a5ed2556_z.jpg" width="480" alt="Firefox ipad"><p>It‚Äôs working on Android but not on iOS‚Ä¶ Why?</p><h3>Edge</h3><p>Not properly displayed</p><img src="https://farm5.staticflickr.com/4889/39914426563_5b128cfa92_z.jpg" width="480" alt="Edge ipad"><p>It‚Äôs working on Android but not on iOS‚Ä¶ Why?</p><h3>DuckDuckGo</h3><p>Not properly displayed</p><img src="https://farm8.staticflickr.com/7915/33003821988_ce03a81d2c_z.jpg" width="480" alt="DuckDuckGo ipad"><h2>PC</h2><p>Windows 10, fully patched, all is perfect</p><h3>Chrome</h3><p>Perfect</p><img src="https://farm66.staticflickr.com/65535/48101126276_bafc95c763_c.jpg" width="711" alt="chrome"><h3>Firefox</h3><p>Perfect</p><img src="https://farm66.staticflickr.com/65535/48101172768_29abfabf76_c.jpg" width="711" alt="firefox"><h3>Edge</h3><p>Perfect</p><img src="https://farm66.staticflickr.com/65535/48101126356_b24c2f4635_c.jpg" width="711" alt="edge2"><h3>Internet Explorer</h3><p>Perfect</p><img src="https://farm66.staticflickr.com/65535/48101126301_ff2602061d_c.jpg" width="711" alt="ie"><h2>Mac</h2><p>All browsers work fine</p><h3>Safari</h3><p>Perfect</p><img src="https://farm66.staticflickr.com/65535/48108493186_4a57522bdf_c.jpg" width="800" alt="mac safari"><h3>Chrome</h3><p>Perfect</p><img src="https://farm66.staticflickr.com/65535/48108534863_4a57522bdf_c.jpg" width="800" alt="mac chrome"><h3>Firefox</h3><p>Perfect</p><img src="https://farm66.staticflickr.com/65535/48108601427_531ecd9756_c.jpg" width="800" alt="mac firefox">]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;This post is about IDN (International Domain Names) and browser support in 2019, 5 years after the previous one. And hopefully, I‚Äôll publ
      
    
    </summary>
    
    
    
      <category term="idn" scheme="https://tp√Æ.eu/tags/idn/"/>
    
      <category term="browser" scheme="https://tp√Æ.eu/tags/browser/"/>
    
      <category term="support" scheme="https://tp√Æ.eu/tags/support/"/>
    
  </entry>
  
  <entry>
    <title>Switching to Emoji Theme</title>
    <link href="https://tp√Æ.eu/2018/07/31/Switching-To-Emoji-Theme/"/>
    <id>https://tp√Æ.eu/2018/07/31/Switching-To-Emoji-Theme/</id>
    <published>2018-07-31T00:00:00.000Z</published>
    <updated>2018-07-31T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>In the past weeks, I have transformed the theme of this blog to use emoji instead of FontAwesome icons (FA).</p><p>FA icons were of great service, but I was only using few of them, and it was needlessly adding latency and using bandwidth.</p><p>The latency was caused by the fact that the font needed to be loaded after the CSS was loaded, and the bandwidth usage was caused by the weight of the font file. See <a href="https://github.com/tomap/tpi2.eu/blob/975f9a247fff11d360085b0ef971f88e01f889df/themes/anodyne/source/fonts/fontawesome-webfont.woff2" target="_blank" rel="noopener">the .woff2 file for example</a>: 72KB.</p><p>For the CSS and font files, I had two possibilities:</p><ul><li>either reference them from a CDN, and hope that they were already cached by the client. If not, the client had to download the font + the full CSS (31KB or 7KB gzipped)</li><li>or embed them in the site, and by using <a href="https://github.com/uncss/uncss" target="_blank" rel="noopener">uncss</a> be able to strip down the CSS for the icons I was not using. Only a few bytes.</li></ul><p>I experimented both, and ended up using the 2nd option: embedding FontAwesome to leverage uncss with hexo-uncss.</p><p>Then I looked at the very few icons I was using, and realized I could use Emoji instead.</p><p>I made a map <a href="https://github.com/tomap/tpi2.eu/blob/0fe8e130dffd87a1d9e631637ddfb99b03f1d5d0/FontAwesomeToUnicode.md" target="_blank" rel="noopener">FA &lt;> Emoji</a>.<br>I found an equivalent for every icons except the brands (LinkedIn, Twitter, ‚Ä¶).<br>For them, I switched from Font Icons to SVG of those icons (first using FA SVG‚Äôs, and then SVG from <a href="https://simpleicons.org/" target="_blank" rel="noopener">SimpleIcons</a>, with a more permissive license CC Zero)</p><p>Here are the technical changes I made to do that:</p><h2>Emojis</h2><p>I used emojis for pages & posts titles and for the ‚Äútags‚Äù & ‚Äúshare‚Äù icons (see at the bottom of the page).</p><p>In the header of the post, instead of mentioning:</p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">icon: fa-fire</span><br></pre></td></tr></table></figure><p>I can use the emoji directly:</p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">icon: üî•</span><br></pre></td></tr></table></figure><p>This will the reference the css <code>.ec-üî•</code> which will display the icon as a <code>content: 'üî•'</code></p><p>I also had to change the open graph image used when sharing to Twitter or LinkedIn. For the, I found this service <a href="https://i‚ù§Ô∏è.ws/emoji-image/üî•.png" target="_blank" rel="noopener">https://i‚ù§Ô∏è.ws/emoji-image/üî•.png</a> which provides a png from an emoji. See <a href="https://medium.com/@Emoji_Domains/free-emoji-image-generator-api-c0b7eaefa586" target="_blank" rel="noopener">the article on Medium</a> for more explanation.</p><p>By default, emoji are displayed with colors, see the fire or smiley üî• üòä.<br>In order to keep something closer to FA, I applied a <code>filter: sepia(90%);</code> which gave them a nicer render.</p><h2>Brands</h2><p>For brands, I used the brand icons from SimpleIcons.org. They have pretty much every brand you can ask for, and if they don‚Äôt have it, you can <a href="https://github.com/simple-icons/simple-icons/issues/625#issuecomment-361242420" target="_blank" rel="noopener">ask for it</a>.</p><p>It‚Äôs a manual process: I copied the brand icon from they site, optimized it using <a href="https://jakearchibald.github.io/svgomg/" target="_blank" rel="noopener">https://jakearchibald.github.io/svgomg/</a>, manually removed some more useless stuff and paste them as inline background images.</p><p>Original SVG (twitter)</p><figure class="highlight svg"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">aria-labelledby</span>=<span class="string">"simpleicons-twitter-icon"</span> <span class="attr">role</span>=<span class="string">"img"</span> <span class="attr">viewBox</span>=<span class="string">"0 0 24 24"</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span>></span><span class="tag">&lt;<span class="name">title</span> <span class="attr">id</span>=<span class="string">"simpleicons-twitter-icon"</span>></span>Twitter icon<span class="tag">&lt;/<span class="name">title</span>></span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">"M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"</span>/></span><span class="tag">&lt;/<span class="name">svg</span>></span></span><br></pre></td></tr></table></figure><p>Resulting CSS (in Stylus):</p><figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.ic-twitter</span></span><br><span class="line">    background-image url("data:image/svg+xml;utf8,&lt;svg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>&lt;path d='M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096a4.9044 4.9044 0 0 1-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827a4.9631 4.9631 0 0 1-2.212.085c.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z'/>&lt;/svg>")</span><br></pre></td></tr></table></figure><p>And here we are:</p><ul><li>Home page HTML is now 9.91kb from 9.97kb</li><li>CSS is now 8.96kb from 7.84kb</li><li>no more Font file downloaded (was 75.9kb)</li></ul><p>So it‚Äôs lighter overall, but a bit bigger for CSS.</p><p>Next step will be to create a nice theme and share it on <a href="https://hexo.io/themes/" target="_blank" rel="noopener">https://hexo.io/themes/</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;In the past weeks, I have transformed the theme of this blog to use emoji instead of FontAwesome icons (FA).&lt;/p&gt;&lt;p&gt;FA icons were of great
      
    
    </summary>
    
    
    
      <category term="theme" scheme="https://tp√Æ.eu/tags/theme/"/>
    
      <category term="emoji" scheme="https://tp√Æ.eu/tags/emoji/"/>
    
  </entry>
  
  <entry>
    <title>New Comment System</title>
    <link href="https://tp√Æ.eu/2018/01/12/New-comment-system/"/>
    <id>https://tp√Æ.eu/2018/01/12/New-comment-system/</id>
    <published>2018-01-12T00:00:00.000Z</published>
    <updated>2018-01-12T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>I dropped Disqus comment system from this site after reading this news: <a href="https://blog.disqus.com/disqus-and-zeta" target="_blank" rel="noopener">https://blog.disqus.com/disqus-and-zeta</a> and the wikipedia page which raises many privacy concerns: <a href="https://en.wikipedia.org/wiki/Disqus#Criticism_and_privacy_concerns" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Disqus#Criticism_and_privacy_concerns</a><br>Also, with this change, I have a fully static site, without any javascript.</p><p>So, I looked around to find a third party websites with a bit guarantee but could not find any.<br>So I decided to switch to asking reader to comment on third party sites like Twitter, LinkedIn and Github.</p><p>So I created links (see bellow this post) to share comments via those sites.</p><h2>Github</h2><p>For Github, I could not find an official documentation describing the url format to create an issue with some fields prefilled but I found this: <a href="https://github.com/isaacs/github/issues/99" target="_blank" rel="noopener">https://github.com/isaacs/github/issues/99</a> which explains how to prefill the title, body & label:<br><code>https://github.com/account/repo/issues/new?labels=mylabel&title=myTitle&body=myBody</code><br>Note that you can‚Äôt prefill a random label. The label must b part of the project label list: <a href="https://help.github.com/articles/creating-a-label/" target="_blank" rel="noopener">https://help.github.com/articles/creating-a-label/</a></p><p>And here is the result:</p><img src="https://farm5.staticflickr.com/4766/24775863397_eb91b824dc.jpg" width="500" alt="Post Github issue"><h2>Twitter</h2><p>For Twitter, there is a nice documentation: <a href="https://dev.twitter.com/web/tweet-button/web-intent" target="_blank" rel="noopener">https://dev.twitter.com/web/tweet-button/web-intent</a></p><p>Here is the URL: <code>https://twitter.com/intent/tweet?url=https://example.com/myPage&via=tomap</code></p><p>And here is the result:</p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">{% flickr 27866246469 %}</span><br></pre></td></tr></table></figure><p>To have a nice ‚Äúcard‚Äù, I had to add a few missing Open Graph tags:</p><ul><li><p><code>image</code>: I pointed to the PNG equivalent of the post icon (Font-Awesome) using this repository: <a href="https://github.com/encharm/Font-Awesome-SVG-PNG" target="_blank" rel="noopener">https://github.com/encharm/Font-Awesome-SVG-PNG</a> which provides Png equivalent of the Font-Awesome icons.<br>I relied on <a href="https://rawgit.com/" target="_blank" rel="noopener">https://rawgit.com/</a> which converts Git Asset url to urls that can be included in your site:</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span> (<span class="attr">page.icon</span> || <span class="attr">theme.default_post_icon</span>){ %></span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">property</span>=<span class="string">"og:image"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">content</span>=<span class="string">"https://raw.githubusercontent.com/encharm/Font-Awesome-SVG-PNG/30dda99e/black/png/256/&lt;%= (page.icon || theme.default_post_icon).substr(3) %>.png"</span> /></span></span><br><span class="line"><span class="tag">&lt;<span class="name">%</span> } %></span></span><br></pre></td></tr></table></figure><p>See <a href="https://github.com/tomap/tpi2.eu/blob/fd279cc51590975d97e1030bffc836b8db8611dc/themes/anodyne/layout/_partial/head.ejs#L48" target="_blank" rel="noopener">https://github.com/tomap/tpi2.eu/blob/master/themes/anodyne/layout/_partial/head.ejs#L48</a></p></li><li><p><code>url</code>: I used <a href="https://hexo.io/docs/variables.html#Page-Variables" target="_blank" rel="noopener">Hexo variable</a> <code>permalink</code>:</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Page permalink --></span></span><br><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span> (<span class="attr">page.permalink</span>){ %></span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">property</span>=<span class="string">"og:url"</span> <span class="attr">content</span>=<span class="string">"&lt;%= page.permalink %>"</span> /></span></span><br><span class="line"><span class="tag">&lt;<span class="name">%</span> } %></span></span><br></pre></td></tr></table></figure></li></ul><h2>LinkedIn</h2><p>Open Graph tags were also needed for LinkedIn but what already existed in the theme and what I added for Twitter was enough.</p><p>To create the url, I used this documentation: <a href="https://developer.linkedin.com/docs/share-on-linkedin#" target="_blank" rel="noopener">https://developer.linkedin.com/docs/share-on-linkedin#</a> > Click on ‚ÄúCustomized URL‚Äù and here is the result: <code>https://www.linkedin.com/shareArticle?mini=true&url=https://tp√Æ.eu/2018/01/10/New-comment-system/</code></p><p>And here is the result:</p><img src="https://farm5.staticflickr.com/4666/38747904405_abbfe2754c.jpg" width="500" alt="Share with LinkedIn"><p>Then all I had to do was to add those links instead of Disqus comment system. See <a href="https://github.com/tomap/tpi2.eu/blob/fd279cc51590975d97e1030bffc836b8db8611dc/themes/anodyne/layout/_partial/comments.ejs#L3" target="_blank" rel="noopener">https://github.com/tomap/tpi2.eu/blob/master/themes/anodyne/layout/_partial/comments.ejs#L3</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;I dropped Disqus comment system from this site after reading this news: &lt;a href=&quot;https://blog.disqus.com/disqus-and-zeta&quot; target=&quot;_blank&quot;
      
    
    </summary>
    
    
    
      <category term="github" scheme="https://tp√Æ.eu/tags/github/"/>
    
      <category term="comment" scheme="https://tp√Æ.eu/tags/comment/"/>
    
      <category term="disqus" scheme="https://tp√Æ.eu/tags/disqus/"/>
    
      <category term="linkedin" scheme="https://tp√Æ.eu/tags/linkedin/"/>
    
      <category term="twitter" scheme="https://tp√Æ.eu/tags/twitter/"/>
    
  </entry>
  
  <entry>
    <title>Testing Firebase hosting</title>
    <link href="https://tp√Æ.eu/2017/12/20/Testing-Firebase-hosting/"/>
    <id>https://tp√Æ.eu/2017/12/20/Testing-Firebase-hosting/</id>
    <published>2017-12-20T00:00:00.000Z</published>
    <updated>2017-12-20T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>Using Travis CI, I tried deploying this hexo site to <a href="https://firebase.google.com/products/hosting/" target="_blank" rel="noopener">firebase hosting</a>.</p><p>It includes 1Gb of storage and 10 Gb of data transfer monthly. So it would be a huge increase compared to OVH Start1m plan (also free).</p><p>It also supports Custom domain (So I could host this site or a subdomain on Firebase) & free SSL certificates.</p><p>I used the doc on travis to do that: <a href="https://docs.travis-ci.com/user/deployment/firebase/" target="_blank" rel="noopener">https://docs.travis-ci.com/user/deployment/firebase/</a></p><p>Then I tried to generate encryption keys using travis command line:<br><a href="https://docs.travis-ci.com/user/encryption-keys/" target="_blank" rel="noopener">https://docs.travis-ci.com/user/encryption-keys/</a></p><p>Unfortunately, it failed:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ travis</span><br><span class="line">-bash: /usr/<span class="built_in">local</span>/bin/travis: /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby: bad interpreter: No such file or directory</span><br></pre></td></tr></table></figure><p>From what I read here and there, it‚Äôs an issue with the last MacOS update (High Sierra).</p><p>Here is the fix:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo gem install -n /usr/<span class="built_in">local</span>/bin travis</span><br></pre></td></tr></table></figure><p>Once this is fixed, it is possible to generate your encryption key:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">travis encrypt <span class="string">"xyz&lt;my ci key>wxy"</span> --add deploy.token</span><br></pre></td></tr></table></figure><p>Note that this will produce a warning that you can ignore.</p><p>Here is the full .travis.yml file:</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="attr">node_js:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">node</span></span><br><span class="line"><span class="attr">git:</span></span><br><span class="line">  <span class="attr">depth:</span> <span class="number">2</span></span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line"><span class="attr">before_install:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">-g</span> <span class="string">hexo-cli</span></span><br><span class="line"><span class="attr">install:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">hexo</span> <span class="string">generate</span></span><br><span class="line"><span class="attr">before_deploy:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">cp</span> <span class="string">firebase/robots.txt</span> <span class="string">public/robots.txt</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">skip_cleanup:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">provider:</span> <span class="string">firebase</span></span><br><span class="line">  <span class="attr">token:</span></span><br><span class="line">    <span class="attr">secure:</span> <span class="string">tEG0...V9g=</span></span><br></pre></td></tr></table></figure><p>The current version is stored here: <a href="https://github.com/tomap/tpi2.eu/blob/master/.travis.yml" target="_blank" rel="noopener">https://github.com/tomap/tpi2.eu/blob/master/.travis.yml</a></p><p>And the result can be seen here: <a href="https://tpi-eu.firebaseapp.com/" target="_blank" rel="noopener">https://tpi-eu.firebaseapp.com/</a> (I added a specific robots.txt to disallow search engine indexing)</p><p>Travis build logs are available here: <a href="https://travis-ci.org/tomap/tpi2.eu" target="_blank" rel="noopener">https://travis-ci.org/tomap/tpi2.eu</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Using Travis CI, I tried deploying this hexo site to &lt;a href=&quot;https://firebase.google.com/products/hosting/&quot; target=&quot;_blank&quot; rel=&quot;noopene
      
    
    </summary>
    
    
    
      <category term="hexo" scheme="https://tp√Æ.eu/tags/hexo/"/>
    
      <category term="firebase" scheme="https://tp√Æ.eu/tags/firebase/"/>
    
      <category term="hosting" scheme="https://tp√Æ.eu/tags/hosting/"/>
    
      <category term="travis" scheme="https://tp√Æ.eu/tags/travis/"/>
    
  </entry>
  
  <entry>
    <title>Site improvements</title>
    <link href="https://tp√Æ.eu/2017/12/18/Site-improvements/"/>
    <id>https://tp√Æ.eu/2017/12/18/Site-improvements/</id>
    <published>2017-12-18T00:00:00.000Z</published>
    <updated>2017-12-18T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>In the last weeks, I have slightly modified this site to bring the following nice improvements:</p><ul><li>Remove most of the JavaScript (Except to launch Disqus. See <a href="https://github.com/tomap/tpi2.eu/blob/a3cbd3a1ed1fd72b483a010f102a7f1e13d98624/themes/anodyne/layout/_partial/comments.ejs#L4" target="_blank" rel="noopener">https://github.com/tomap/tpi2.eu/blob/master/themes/anodyne/layout/_partial/comments.ejs</a>)</li><li>Add HSTS header & nosniff header. See <a href="https://github.com/tomap/tpi2.eu/blob/master/source/.htaccess#L416" target="_blank" rel="noopener">https://github.com/tomap/tpi2.eu/blob/master/source/.htaccess#L416</a></li><li>Include the assets I use (namely FontAwesome & tachyon) in the dev dependencies of package.json so that I can easily spot if thy are updated. Either here: <a href="https://david-dm.org/tomap/tpi2.eu?type=dev" target="_blank" rel="noopener">https://david-dm.org/tomap/tpi2.eu?type=dev</a> or using <a href="https://marketplace.visualstudio.com/items?itemName=pflannery.vscode-versionlens" target="_blank" rel="noopener">Version Lens</a></li><li>Enable <a href="https://github.com/mamboer/hexo-filter-cleanup" target="_blank" rel="noopener">hexo-filter-cleanup</a> plugin which compresses my HTML & CSS</li></ul><p>After all that this site weights less than 200 KB!</p><p>Next I‚Äôll post about Firebase :)</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;In the last weeks, I have slightly modified this site to bring the following nice improvements:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Remove most of the JavaScript 
      
    
    </summary>
    
    
    
      <category term="hexo" scheme="https://tp√Æ.eu/tags/hexo/"/>
    
      <category term="nodejs" scheme="https://tp√Æ.eu/tags/nodejs/"/>
    
      <category term="security" scheme="https://tp√Æ.eu/tags/security/"/>
    
  </entry>
  
  <entry>
    <title>Travis CI Setup attempt</title>
    <link href="https://tp√Æ.eu/2017/04/24/Travis-setup/"/>
    <id>https://tp√Æ.eu/2017/04/24/Travis-setup/</id>
    <published>2017-04-24T00:00:00.000Z</published>
    <updated>2017-04-24T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>I wanted to be able to publish this site using <a href="https://travis-ci.org/" target="_blank" rel="noopener">Travis</a> instead of AppVeyor, just to try.</p><p>I found this with Google: <a href="https://github.com/jkeylu/deploy-hexo-site-by-travis-ci/blob/master/_travis.yml" target="_blank" rel="noopener">https://github.com/jkeylu/deploy-hexo-site-by-travis-ci/blob/master/_travis.yml</a></p><p>I‚Äôm not pushing to GitHub pages but to a FTP so I had to slightly modify the yml following <a href="https://docs.travis-ci.com/user/deployment/custom/#FTP" target="_blank" rel="noopener">this documentation from Travis site</a>:</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">global:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">"FTP_USER=user"</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">"FTP_PASSWORD=password"</span></span><br><span class="line"><span class="attr">after_success:</span></span><br><span class="line">    <span class="string">"curl --ftp-create-dirs -T uploadfilename -u $FTP_USER:$FTP_PASSWORD ftp://sitename.com/directory/myfile"</span></span><br></pre></td></tr></table></figure><p>Unfortunately, there are multiple issues with this:</p><ul><li>One, it only uploads one file, not a full folder</li><li>Two, if the upload fails, it does not break the build.</li></ul><p>To upload a full folder, I found this <a href="https://stackoverflow.com/a/14020013/383029" target="_blank" rel="noopener">on Stack Overflow</a>:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">find mydir -<span class="built_in">type</span> f -<span class="built_in">exec</span> curl -u xxx:psw --ftp-create-dirs -T {} ftp://192.168.1.158/public/demon_test/{} \;</span><br></pre></td></tr></table></figure><p>It is closer but I had to replace <strong>-exec</strong> parameter by piping to <strong><a href="https://www.computerhope.com/unix/xargs.htm" target="_blank" rel="noopener">xargs</a> because **-exec</strong> does not return a -1 exit code in case of failure.</p><p>For escaping data to yaml, I used <a href="https://www.json2yaml.com/" target="_blank" rel="noopener">https://www.json2yaml.com/</a></p><p>In then end, the solution of using after_success is not cool, because in my case, that I consider build is publishing the site to the ftp. So if this step fails, I want the build to fail.</p><p>With after_success, the build is still green if this step fails. See <a href="https://docs.travis-ci.com/user/customizing-the-build/#Breaking-the-Build" target="_blank" rel="noopener">https://docs.travis-ci.com/user/customizing-the-build/#Breaking-the-Build</a></p><p>I also tried that: <a href="https://stackoverflow.com/questions/3790454/in-yaml-how-do-i-break-a-string-over-multiple-lines" target="_blank" rel="noopener">https://stackoverflow.com/questions/3790454/in-yaml-how-do-i-break-a-string-over-multiple-lines</a><br>(did not worked)</p><p>So, in the end, I dropped Travis.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;I wanted to be able to publish this site using &lt;a href=&quot;https://travis-ci.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Travis&lt;/a&gt; instead of AppV
      
    
    </summary>
    
    
    
      <category term="github" scheme="https://tp√Æ.eu/tags/github/"/>
    
      <category term="travis" scheme="https://tp√Æ.eu/tags/travis/"/>
    
  </entry>
  
  <entry>
    <title>Flickr restored</title>
    <link href="https://tp√Æ.eu/2017/02/26/flickr-restored/"/>
    <id>https://tp√Æ.eu/2017/02/26/flickr-restored/</id>
    <published>2017-02-26T00:00:00.000Z</published>
    <updated>2017-02-26T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>I restored Flickr images on my site:</p><img src="https://farm1.staticflickr.com/505/32865582372_504939cc58.jpg" width="500" alt="IMG_20170203_090138"><p>It is less convenient than the <a href="https://github.com/tomap/docpad-plugin-flickrimages" target="_blank" rel="noopener">plugin I developed for Docpad</a> because I have to manually upload images to Flickr myself. Once it is uploaded, I just grab the picture id and stick it inside a tag:</p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">{% flickr 32865582372 %}</span><br></pre></td></tr></table></figure><p>Also, I still have to add something like fancyBox which btw seem to have a <a href="https://fancyapps.com/fancybox/3/" target="_blank" rel="noopener">version 3 available</a>.</p><p>So my todo list for this site:</p><ul><li>add fancyBox</li><li>restore images on previous posts</li><li>maybe test a bit Travis just in case AppVeyor breaks</li><li><del>Install a SSL Certificate with CloudFlare</del> <a href="https://arstechnica.com/security/2017/02/serious-cloudflare-bug-exposed-a-potpourri-of-secret-customer-data/" target="_blank" rel="noopener">or NOT</a></li><li>Add a button to display Disqus comments. So they are not loaded by default.</li><li>Publish my resume :)</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;I restored Flickr images on my site:&lt;/p&gt;&lt;img src=&quot;https://farm1.staticflickr.com/505/32865582372_504939cc58.jpg&quot; width=&quot;500&quot; alt=&quot;IMG_201
      
    
    </summary>
    
    
    
      <category term="flickr" scheme="https://tp√Æ.eu/tags/flickr/"/>
    
  </entry>
  
  <entry>
    <title>AppVeyor Setup</title>
    <link href="https://tp√Æ.eu/2017/02/19/AppVeyor-Setup/"/>
    <id>https://tp√Æ.eu/2017/02/19/AppVeyor-Setup/</id>
    <published>2017-02-19T00:00:00.000Z</published>
    <updated>2017-02-19T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>I just configured AppVeyor Continuous Deployment.</p><p>To do that, I went to <a href="https://www.appveyor.com/" target="_blank" rel="noopener">AppVeyor</a>, <a href="https://ci.appveyor.com/projects" target="_blank" rel="noopener">logged in</a>, then <a href="https://ci.appveyor.com/projects" target="_blank" rel="noopener">Project</a> and click <a href="https://ci.appveyor.com/projects/new" target="_blank" rel="noopener">New Project link on top</a>, then pick the GitHub Repository that you want to build and deploy (<a href="https://github.com/tomap/tpi2.eu" target="_blank" rel="noopener">GitHub.com/tomap/tpi2.eu</a> in my case).</p><p>After that, in the new project, I went to settings, <a href="https://ci.appveyor.com/project/tomap/tpi2-eu/settings" target="_blank" rel="noopener">https://ci.appveyor.com/project/tomap/tpi2-eu/settings</a>, in the Build part, I choose Script and added the following:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install</span><br><span class="line">npm -g install hexo-cli</span><br><span class="line">hexo generate</span><br></pre></td></tr></table></figure><p>that generates the site in the <strong>public</strong> folder.</p><p>Then I went to Artifact and selected the content of this folder: <code>public\**\*</code></p><p>Then I went to Deploy, choose FTP deployment. And that when issues started :(</p><p>FTP is always something messy. Active or not. FTP, SFTP or FTPS. I tried them all without success.<br>Then start googling and although my issue was not exactly the same, I tried the suggestion from <a href="https://help.appveyor.com/discussions/problems/3236-cant-deploy-via-ftp-because-of-error-message-450" target="_blank" rel="noopener">AppVeyor Support Forum</a> and guess what, it worked!<br>The solution was to enable a ‚ÄúBeta FTP‚Äù option, ‚Ä¶ of course.</p><p>Well, at first, I wanted to use SFTP (you know, for security, ‚Ä¶), which is supposed to be enabled on my OVH account, but it did not work. So that‚Äôs for another day.</p><p>To test the deployment, I set the FTP folder to <strong>/www/test/</strong>. Strangely, AppVeyor decided that the best folder to deploy my files was: <strong>/www/test/<strong>public</strong>/‚Ä¶_ instead of directly __/www/test/‚Ä¶</strong> it was one folder too deep.</p><p>I googled again and found <a href="https://www.appveyor.com/docs/packaging-artifacts/#pushing-artifacts-from-scripts" target="_blank" rel="noopener">that AppVeyor documentation page that helped me</a>. So my solution was to remove the artifact and instead use a PowerShell to publish the files so that their path was <strong>index.html</strong> instead of <strong>public/index.html</strong>.</p><p>After some trial and errors (~40 of them), I end up with something working. This is all nice and great, but I don‚Äôt like having all the configuration in AppVeyor, I prefer to have it in my Git Repository, so I can reproduce it somewhere else and I can share it also :)</p><p>Here is the exported version of my configuration: <strong>AppVeyor.yml</strong></p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="number">1.1</span><span class="string">.{build}</span></span><br><span class="line"><span class="attr">build_script:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">cmd:</span> <span class="string">>-</span></span><br><span class="line">    <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">    <span class="string">npm</span> <span class="string">-g</span> <span class="string">install</span> <span class="string">hexo-cli</span></span><br><span class="line">    <span class="string">hexo</span> <span class="string">generate</span></span><br><span class="line"><span class="attr">test:</span> <span class="string">off</span></span><br><span class="line"><span class="attr">before_deploy:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">ps:</span> <span class="string">$root</span> <span class="string">=</span> <span class="string">Resolve-Path</span> <span class="string">.\public;</span> <span class="string">[IO.Directory]::GetFiles($root.Path,</span> <span class="string">'*.*'</span><span class="string">,</span> <span class="string">'AllDirectories'</span><span class="string">)</span> <span class="string">|</span> <span class="string">%</span> <span class="string">{</span> <span class="string">Push-AppveyorArtifact</span> <span class="string">$_</span> <span class="string">-FileName</span> <span class="string">$_.Substring($root.Path.Length</span> <span class="string">+</span> <span class="number">1</span><span class="string">)</span> <span class="string">-DeploymentName</span> <span class="string">www</span> <span class="string">}</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">provider:</span> <span class="string">FTP</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">ftp.cluster014.hosting.ovh.net</span></span><br><span class="line">  <span class="attr">protocol:</span> <span class="string">ftp</span></span><br><span class="line">  <span class="attr">username:</span> <span class="string">xntprja</span></span><br><span class="line">  <span class="attr">password:</span></span><br><span class="line">    <span class="attr">secure:</span> <span class="string">xXShqZFpQ6Jeg8O86XJ8fiqe7AiTHWrFaS6ic4AVTtE=</span></span><br><span class="line">  <span class="attr">folder:</span> <span class="string">/www/test</span></span><br><span class="line">  <span class="attr">artifact:</span> <span class="string">www</span></span><br><span class="line">  <span class="attr">active_mode:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">beta:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">debug:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>It takes around 2 minutes to build (due to npm package restore and FTP upload, mainly).<br>You can see the latest logs here: <a href="https://ci.appveyor.com/project/tomap/tpi2-eu" target="_blank" rel="noopener">https://ci.appveyor.com/project/tomap/tpi2-eu</a><br>And the AppVeyor.yaml is pushed on my repo: <a href="https://github.com/tomap/tpi2.eu/blob/master/appveyor.yml" target="_blank" rel="noopener">https://github.com/tomap/tpi2.eu/blob/master/appveyor.yml</a><br>I also added an indispensable badge in my <a href="https://github.com/tomap/tpi2.eu/blob/master/Readme.md" target="_blank" rel="noopener">ReadMe</a>: <a href="https://ci.appveyor.com/project/tomap/tpi2-eu" target="_blank" rel="noopener"><img src="https://ci.appveyor.com/api/projects/status/amvptl7n6hj3j8i6?svg=true" alt="Build status"></a></p><p>EDIT:<br>It seems that when using <strong>appveyor.yml</strong> to store the configuration, AppVeyor uses a different virtual machine with a lower version of NodeJS. So, google again, and I found <a href="https://www.appveyor.com/docs/lang/nodejs-iojs/" target="_blank" rel="noopener">help in their support page again</a>, and I had to add:</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">...</span></span><br><span class="line"><span class="attr">install:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">ps:</span> <span class="string">Install-Product</span> <span class="string">node</span> <span class="string">''</span></span><br><span class="line"><span class="string">...</span></span><br></pre></td></tr></table></figure><p>Which should install latest version of node (7.x) :)</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;I just configured AppVeyor Continuous Deployment.&lt;/p&gt;&lt;p&gt;To do that, I went to &lt;a href=&quot;https://www.appveyor.com/&quot; target=&quot;_blank&quot; rel=&quot;no
      
    
    </summary>
    
    
    
      <category term="appveyor" scheme="https://tp√Æ.eu/tags/appveyor/"/>
    
      <category term="github" scheme="https://tp√Æ.eu/tags/github/"/>
    
  </entry>
  
  <entry>
    <title>V2 Published</title>
    <link href="https://tp√Æ.eu/2017/02/16/V2-published/"/>
    <id>https://tp√Æ.eu/2017/02/16/V2-published/</id>
    <published>2017-02-16T00:00:00.000Z</published>
    <updated>2017-02-16T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>V2 of this site has been published.</p><p>I also pushed it on <a href="https://github.com/tomap/tpi2.eu" target="_blank" rel="noopener">GitHub</a>.</p><p>Also, OVH supports free https certificate with <a href="https://letsencrypt.org/" target="_blank" rel="noopener">Let‚Äôs Encrypt</a>. Nothing complicated, just using the admin console. <a href="https://www.ovh.co.uk/news/articles/a2224.ovh-your-free-ssl-certificates-via-lets-encrypt" target="_blank" rel="noopener">See their blog</a>.</p><p>Now I‚Äôll configure automatic deployment with <a href="https://www.appveyor.com/" target="_blank" rel="noopener">AppVeyor</a> and restore lost images :)</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;V2 of this site has been published.&lt;/p&gt;&lt;p&gt;I also pushed it on &lt;a href=&quot;https://github.com/tomap/tpi2.eu&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;G
      
    
    </summary>
    
    
    
      <category term="github" scheme="https://tp√Æ.eu/tags/github/"/>
    
      <category term="hosting" scheme="https://tp√Æ.eu/tags/hosting/"/>
    
      <category term="letsencrypt" scheme="https://tp√Æ.eu/tags/letsencrypt/"/>
    
  </entry>
  
  <entry>
    <title>New site generator (take 2)</title>
    <link href="https://tp√Æ.eu/2017/02/10/new-blog-generator-2/"/>
    <id>https://tp√Æ.eu/2017/02/10/new-blog-generator-2/</id>
    <published>2017-02-10T00:00:00.000Z</published>
    <updated>2017-02-10T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>After trying Hugo, I tried <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a>.</p><p>Like Docpad, Hexo is also based upon NodeJS.</p><p>Basically, you can write your posts in Markdown, HTML, <a href="http://www.embeddedjs.com/" target="_blank" rel="noopener">EJS</a>, like with Docpad.</p><p>It has many themes. I picked <a href="https://github.com/klugjo/hexo-theme-anodyne" target="_blank" rel="noopener">Anodyne</a> and simplified it.<br>Unlike Hugo, you can easily modify the theme‚Äôs CSS (or <a href="http://stylus-lang.com/" target="_blank" rel="noopener">Stylus</a>), and when you generate the site, it also regenerate the CSS.</p><p>Next steps:</p><ul><li>Integrate this plugin <a href="https://github.com/visioncan/hexo-tag-flickr" target="_blank" rel="noopener">https://github.com/visioncan/hexo-tag-flickr</a> to have images back</li><li>Setup AppVeyor to publish the site when committing</li><li>Setup SSL (with Cloudflare or OVH if it‚Äôs free)</li></ul><p>PS: <a href="https://github.com/tomap/tpi.eu" target="_blank" rel="noopener">old site still exists on GitHub</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;After trying Hugo, I tried &lt;a href=&quot;https://hexo.io&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;Like Docpad, Hexo is also based upon 
      
    
    </summary>
    
    
    
      <category term="hexo" scheme="https://tp√Æ.eu/tags/hexo/"/>
    
      <category term="nodejs" scheme="https://tp√Æ.eu/tags/nodejs/"/>
    
      <category term="static" scheme="https://tp√Æ.eu/tags/static/"/>
    
  </entry>
  
  <entry>
    <title>New site generator (take 1)</title>
    <link href="https://tp√Æ.eu/2017/02/05/new-blog-generator-1/"/>
    <id>https://tp√Æ.eu/2017/02/05/new-blog-generator-1/</id>
    <published>2017-02-05T00:00:00.000Z</published>
    <updated>2017-02-05T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>I was trying to change the site generator to something simpler and that would also support including images hosted elsewhere.</p><p>After <a href="https://www.staticgen.com/" target="_blank" rel="noopener">some research</a>, I found <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>. Hugo is a static site generator using Go.</p><p>The change was simple.</p><p>I followed the <a href="https://gohugo.io/overview/quickstart/" target="_blank" rel="noopener">quick start tutorial</a>, then picked a new theme: <a href="https://github.com/the2ne/hugo-frais" target="_blank" rel="noopener">hugo-frais</a> and transferred posts from the old site.</p><p>Post headers are similar. Before:</p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: My progress in setting this site up</span><br><span class="line">layout: post</span><br><span class="line">tags: [setup,progress,site]</span><br><span class="line">date: '2013-01-26'</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p>After:</p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">+++</span><br><span class="line">title= "My progress in setting this site up"</span><br><span class="line">tags= ["setup","progress","site"]</span><br><span class="line">date= "2013-01-26"</span><br><span class="line">+++</span><br></pre></td></tr></table></figure><p>Not so complicated.</p><p>However, in then end, I looked at the source code and found some ugliness:</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">base</span> <span class="attr">href</span>=<span class="string">"https://xn--tp-rja.eu/"</span>></span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"generator"</span> <span class="attr">content</span>=<span class="string">"Hugo 0.18.1"</span> /></span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"canonical"</span> <span class="attr">href</span>=<span class="string">"https://xn--tp-rja.eu/"</span>></span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"https://tp%C3%AE.eu/index.xml"</span> <span class="attr">rel</span>=<span class="string">"alternate"</span> <span class="attr">type</span>=<span class="string">"application/rss+xml"</span> <span class="attr">title</span>=<span class="string">"Thomas Piart"</span> /></span></span><br></pre></td></tr></table></figure><p>After some digging in the options, it found two options:</p><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">canonifyURLs</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">relativeURLs</span> = <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>they made some url relative, but some were still broken and here did not seem to be an easy way to solve that.</p><p>I raised some issues on github, but eventually choose not to use Hugo.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;I was trying to change the site generator to something simpler and that would also support including images hosted elsewhere.&lt;/p&gt;&lt;p&gt;After
      
    
    </summary>
    
    
    
      <category term="hugo" scheme="https://tp√Æ.eu/tags/hugo/"/>
    
      <category term="static" scheme="https://tp√Æ.eu/tags/static/"/>
    
      <category term="go" scheme="https://tp√Æ.eu/tags/go/"/>
    
  </entry>
  
  <entry>
    <title>IDN and browser support</title>
    <link href="https://tp√Æ.eu/2014/01/05/IDN-and-browser-support/"/>
    <id>https://tp√Æ.eu/2014/01/05/IDN-and-browser-support/</id>
    <published>2014-01-05T00:00:00.000Z</published>
    <updated>2014-01-05T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>This post is about IDN and browser support.</p><p>First of all, http does not support unicode :). To <i>do</i> unicode, they use a <b>punycode</b> to convert any domain name into it's ascii equivalent: for example, my domain <b>tp√Æ.eu</b> is translated to <b>https://xn--tp-rja.eu/</b>.</p>I bought this IDN domain (tp√Æ.eu), found this idea very clever until I found out that browser support wasn't so good. It goes from no support to little issues to perfect.<p></p><p>Those differences can be explained because IDN is new and viewed as a potential security threat.</p><p>For example, using similar characters in ascii and unicode, one could spoof the content of ebay.com and send you to –µbay.com: You did not notice any differences? Have a better look: <u>ebay.com</u> and <u>–µbay.com</u> . notice the difference between <b>e</b> and <b>–µ</b>: the last one is a Cyrillic character. (see <a href="https://en.wikipedia.org/wiki/IDN_homograph_attack" target="_blank" rel="noopener">wikipedia about that</a>)</p><p>To avoid that, Registar are supposed to do some similarity check and reject possible spoof. Browser on the other side also have some kind of protection which varies from one browser to another. If the check fails, you'll see <i>safe</i> punycode.</p><p>Let's start:</p><h2>Firefox 19</h2><p>On Mac, <b>.eu</b> extension is not supposed to display IDN, so it's not part of a white list, so by default, you should see punycode. What I did was to add a key to about:config to add .eu to the white list:</p><img src="https://farm1.staticflickr.com/569/32966871092_619871c9dd_z.jpg" width="640" alt="Firefox Mac About Config"><p>And here is the result:</p><img src="https://farm3.staticflickr.com/2840/32278189784_0e843d6d75_z.jpg" width="640" alt="Firefox Mac"><h2>Chrome on Android</h2><p>On Android, with Chrome: it does not work and shows punycode:</p><img src="https://farm4.staticflickr.com/3683/32996560941_2d9bcd97ab_z.jpg" width="640" alt="chrome android"><p>Note: I wrote this article one year ago (in March 2013) and never took time to publish it :(</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;This post is about IDN and browser support.&lt;/p&gt;&lt;p&gt;First of all, http does not support unicode :). To &lt;i&gt;do&lt;/i&gt; unicode, they use a &lt;b&gt;pun
      
    
    </summary>
    
    
    
      <category term="idn" scheme="https://tp√Æ.eu/tags/idn/"/>
    
      <category term="browser" scheme="https://tp√Æ.eu/tags/browser/"/>
    
      <category term="support" scheme="https://tp√Æ.eu/tags/support/"/>
    
  </entry>
  
  <entry>
    <title>Docpad and flickr</title>
    <link href="https://tp√Æ.eu/2013/03/10/Docpad-and-flickr/"/>
    <id>https://tp√Æ.eu/2013/03/10/Docpad-and-flickr/</id>
    <published>2013-03-10T00:00:00.000Z</published>
    <updated>2013-03-10T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>After my last post, I wanted to write something about IDN and browser support.<br>So I made lot's of screen shots about how well IDN is supported.<br>Then I figured that if I ever wanted to do more than one post with images on this blog, I had to host those images somewhere...<br>So, I started looking at some image hosting services, like google, 500px, ... and in the end, I choose flickr because they have an API, and I already had an account.<br>In order to avoid uploading images one by one and linking them to my post, I have tried to automate this process using a docpad plugin:</p><h2>docpad-plugin-flickrimages</h2><p>This plugin is a fork from <a href="https://github.com/docpad/docpad-plugin-associatedfiles/" target="_blank" rel="noopener">docpad-flickr-associatedfiles</a>. It's a start :).<br>Here is how it works:<ol><li>List all images in a dedicated folder</li><li>Call Flickr to get the list of images with a tag ("docpad" by default, but can be configured)</li><li>Get additional properties (url of images in various sizes,...)</li><li>If local image is not on flickr, upload it</li><li>If local image is on flickr, check the last update, and update the image if necessary</li><li>Remove local image from file that needs to be copied to the output directory</li><li>In any page, add a link to an image using document.getFlickrImage('my image.png')</li><li>this call will be replace by a reference to the image on flickr</li></ol>Currently some thing are not yet working:<ul><li>Update an image</li><li>There are no tests</li><li>Error cases are not working</li><li>...</li></ul></p><p>A little example:</p>[EDIT: Fev 2017: does not work yet in Hugo]<br>%- @getDocument().getFlickrImage('blog post code.png') %<br>%- @getDocument().getFlickrImage('beaglebone.jpg') %<br><p>Also: by default, getFlickrImage return a piece of HTML that works fine with fancybox.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;After my last post, I wanted to write something about IDN and browser support.&lt;br&gt;So I made lot&#39;s of screen shots about how well IDN is s
      
    
    </summary>
    
    
    
      <category term="docpad" scheme="https://tp√Æ.eu/tags/docpad/"/>
    
      <category term="image" scheme="https://tp√Æ.eu/tags/image/"/>
    
      <category term="flickr" scheme="https://tp√Æ.eu/tags/flickr/"/>
    
      <category term="oauth" scheme="https://tp√Æ.eu/tags/oauth/"/>
    
  </entry>
  
  <entry>
    <title>CoffeeScript, Comments, DocPad, ...</title>
    <link href="https://tp√Æ.eu/2013/01/31/coffescript-comments-docpad/"/>
    <id>https://tp√Æ.eu/2013/01/31/coffescript-comments-docpad/</id>
    <published>2013-01-31T00:00:00.000Z</published>
    <updated>2013-01-31T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>Thanks to DocPad, I‚Äôm learning new languages:</p><ul><li>CoffeeScript is not so easy to learn, but a lot cleaner than plain JS.</li><li>Markdown is also very simple. Makes you focus on text, not on format. Like wiki syntax.</li><li><a href="http://coffeekup.org/" target="_blank" rel="noopener">CoffeeKup</a> is interesting but very confusing when you practiced HTML for a long time.</li></ul><p>Originally, this site skeleton was a clone of <a href="https://BaLupton.com" target="_blank" rel="noopener">Benjamin Lupton‚Äôs website</a>, but I made some changes.<br>Everything has been pushed to GitHub.</p><p>I also restored Disqus comments.</p><p>I am working on integrating a FTP module to Docpad in order to automatically upload new changes to tp√Æ.eu, without having to use a FTP Client.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Thanks to DocPad, I‚Äôm learning new languages:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;CoffeeScript is not so easy to learn, but a lot cleaner than plain JS.&lt;/li&gt;&lt;li&gt;M
      
    
    </summary>
    
    
    
      <category term="setup" scheme="https://tp√Æ.eu/tags/setup/"/>
    
      <category term="progress" scheme="https://tp√Æ.eu/tags/progress/"/>
    
      <category term="site" scheme="https://tp√Æ.eu/tags/site/"/>
    
  </entry>
  
  <entry>
    <title>My progress in setting this site up</title>
    <link href="https://tp√Æ.eu/2013/01/26/progress-in-setting-this-site-up/"/>
    <id>https://tp√Æ.eu/2013/01/26/progress-in-setting-this-site-up/</id>
    <published>2013-01-26T00:00:00.000Z</published>
    <updated>2013-01-26T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>I‚Äôm making some progress.</p><p>Some context:</p><ul><li>I am hosted by OVH with a .eu domain (they have an offer for <a href="https://www.ovh.com/fr/domaines/doteu.xml" target="_blank" rel="noopener">0.99 euros</a> until January 31)</li><li>I choose a 3 letters domain : <em>tp√Æ.eu</em> (IDN provide plenty of new <strong>short domain</strong> names!)</li><li>I am using DocPad to run this site, so no PHP, no SQL, no CGI, ‚Ä¶ which makes a lot of sense since I wouldn‚Äôt need a incredible database to store a few ‚Äòstatic‚Äô blog posts</li><li>After feeling so smart about this 3 letters domain, I found out that IDN are a lot messier than they look (I‚Äôll do a separate post about that)</li></ul><p>To be continued :)</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;I‚Äôm making some progress.&lt;/p&gt;&lt;p&gt;Some context:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;I am hosted by OVH with a .eu domain (they have an offer for &lt;a href=&quot;https://ww
      
    
    </summary>
    
    
    
      <category term="setup" scheme="https://tp√Æ.eu/tags/setup/"/>
    
      <category term="progress" scheme="https://tp√Æ.eu/tags/progress/"/>
    
      <category term="site" scheme="https://tp√Æ.eu/tags/site/"/>
    
  </entry>
  
  <entry>
    <title>This is my first news on this site</title>
    <link href="https://tp√Æ.eu/2013/01/20/first-news-on-this-site/"/>
    <id>https://tp√Æ.eu/2013/01/20/first-news-on-this-site/</id>
    <published>2013-01-20T11:11:11.000Z</published>
    <updated>2013-01-20T11:11:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>This is my first post‚Ä¶</p><p>I‚Äôm trying to set up this site properly.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;This is my first post‚Ä¶&lt;/p&gt;&lt;p&gt;I‚Äôm trying to set up this site properly.&lt;/p&gt;
      
    
    </summary>
    
    
    
      <category term="site" scheme="https://tp√Æ.eu/tags/site/"/>
    
  </entry>
  
</feed>
