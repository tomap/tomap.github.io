<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Thomas Piart - tpî.eu - Personal site"><meta name="author" content="Thomas Piart"><meta property="og:title" content="Testing Firebase hosting"><meta property="og:description" content="Thomas Piart - tpî.eu - Personal site"><meta property="og:site_name" content="Thomas Piart - tpî.eu"><meta property="og:type" content="article"><meta property="og:image" content="https://i❤️.ws/emoji-image/🔥.png"><meta property="og:url" content="https://tpî.eu/2017/12/20/Testing-Firebase-hosting/"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@tomap"><meta name="generator" content="Hexo"><title>Testing Firebase hosting - #hexo - #firebase - #hosting - #travis - Thomas Piart - tpî.eu</title><link rel="stylesheet" href="/css/style.css"><link rel="alternate" href="/atom.xml" title="Thomas Piart - tpî.eu" type="application/atom+xml"><link rel="alternate" href="/rss2.xml" title="Thomas Piart - tpî.eu" type="application/rss+xml"></head><body class="sans-serif"><header class="w-100 bg-1 ph5-ns ph3 text-light"><nav class="db w-100 mw8 center border-box pv3"><div class="db v-mid w-100 tc tr-ns"><a class="link dim f6 f5-l dib mr3 mr4-l white" href="/">Home </a><a class="link dim f6 f5-l dib mr3 mr4-l white" href="/resume/">Resume</a></div></nav><div class="w-100 tc db dt-ns"><div class="dib dtc-ns w-90-ns white"><h1 class="f1-ns tc tc-ns tl-ns">Testing Firebase hosting</h1></div><div class="dib dtc-ns w-10-ns f1 f-5-ns f-6-l mb2"><span class="ec">🔥</span></div></div></header><div class="w-100 ph2 ph4-m ph5-l mv5"><div class="content"><div class="mw8 center"><div class="cf"><div class="fl w-100 mw7 left fw3 lh-copy pr4-ns pr0-m post-content"><p>Using Travis CI, I tried deploying this hexo site to <a target="_blank" href="https://firebase.google.com/products/hosting/" rel="noopener external nofollow noreferrer noopener">firebase hosting</a>.</p><p>It includes 1Gb of storage and 10 Gb of data transfer monthly. So it would be a huge increase compared to OVH Start1m plan (also free).</p><p>It also supports Custom domain (So I could host this site or a subdomain on Firebase) & free SSL certificates.</p><p>I used the doc on travis to do that: <a target="_blank" href="https://docs.travis-ci.com/user/deployment/firebase/" rel="noopener external nofollow noreferrer noopener">https://docs.travis-ci.com/user/deployment/firebase/</a></p><p>Then I tried to generate encryption keys using travis command line:<br><a target="_blank" href="https://docs.travis-ci.com/user/encryption-keys/" rel="noopener external nofollow noreferrer noopener">https://docs.travis-ci.com/user/encryption-keys/</a></p><p>Unfortunately, it failed:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ travis</span><br><span class="line">-bash: /usr/<span class="built_in">local</span>/bin/travis: /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby: bad interpreter: No such file or directory</span><br></pre></td></tr></table></figure><p>From what I read here and there, it’s an issue with the last MacOS update (High Sierra).</p><p>Here is the fix:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo gem install -n /usr/<span class="built_in">local</span>/bin travis</span><br></pre></td></tr></table></figure><p>Once this is fixed, it is possible to generate your encryption key:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">travis encrypt <span class="string">"xyz&lt;my ci key>wxy"</span> --add deploy.token</span><br></pre></td></tr></table></figure><p>Note that this will produce a warning that you can ignore.</p><p>Here is the full .travis.yml file:</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="attr">node_js:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">node</span></span><br><span class="line"><span class="attr">git:</span></span><br><span class="line">  <span class="attr">depth:</span> <span class="number">2</span></span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line"><span class="attr">before_install:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">-g</span> <span class="string">hexo-cli</span></span><br><span class="line"><span class="attr">install:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">hexo</span> <span class="string">generate</span></span><br><span class="line"><span class="attr">before_deploy:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">cp</span> <span class="string">firebase/robots.txt</span> <span class="string">public/robots.txt</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">skip_cleanup:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">provider:</span> <span class="string">firebase</span></span><br><span class="line">  <span class="attr">token:</span></span><br><span class="line">    <span class="attr">secure:</span> <span class="string">tEG0...V9g=</span></span><br></pre></td></tr></table></figure><p>The current version is stored here: <a target="_blank" href="https://github.com/tomap/tpi2.eu/blob/b4a196bef3b788a73d44cbdfb45405dc10dc5c63/.travis.yml" rel="noopener external nofollow noreferrer noopener">https://github.com/tomap/tpi2.eu/blob/master/.travis.yml</a></p><p>And the result can be seen here: <a target="_blank" href="https://tpi-eu.firebaseapp.com/" rel="noopener external nofollow noreferrer noopener">https://tpi-eu.firebaseapp.com/</a> (I added a specific robots.txt to disallow search engine indexing)</p><p>Travis build logs are available here: <a target="_blank" href="https://travis-ci.org/tomap/tpi2.eu" rel="noopener external nofollow noreferrer noopener">https://travis-ci.org/tomap/tpi2.eu</a></p><div class="pt3"><span class="ec pr2">🕗</span>2017-12-20</div><div class="pt3"><span class="ec ec-mono pr2">🔖</span> <a class="mr3" href="/tags/hexo/">#hexo</a> <a class="mr3" href="/tags/firebase/">#firebase</a> <a class="mr3" href="/tags/hosting/">#hosting</a> <a class="mr3" href="/tags/travis/">#travis</a></div><div class="pt3 comment"><span class="ec ec-mono pr2">💬</span><span class="mr2">Comment on</span> <a class="mr3 ic ic-share ic-github" href="https://github.com/tomap/tpi2.eu/issues/new?labels=comment&title=Testing%20Firebase%20hosting&body=%0A%0AUrl:%20https://tp%C3%AE.eu/2017/12/20/Testing-Firebase-hosting/" target="_blank" rel="noopener noreferrer">github </a><a class="mr3 ic ic-share ic-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://tp%C3%AE.eu/2017/12/20/Testing-Firebase-hosting/" target="_blank" rel="noopener noreferrer">linkedin </a><a class="mr3 ic ic-share ic-twitter" href="https://twitter.com/intent/tweet?url=https://tp%C3%AE.eu/2017/12/20/Testing-Firebase-hosting/&via=tomap" target="_blank" rel="noopener noreferrer">twitter</a></div></div></div></div></div></div><footer class="bg-1 ph2 ph5-ns pv5 center tc"><a class="dib mh3 glow o-70" href="https://stackoverflow.com/users/383029/tomap" title="My StackOverflow's Profile" target="_blank" rel="noopener noreferrer"><i class="ic ic-stackoverflow"></i> </a><a class="dib mh3 glow o-70" href="https://github.com/tomap/" title="My GitHub's Profile" target="_blank" rel="noopener noreferrer"><i class="ic ic-github"></i> </a><a class="dib mh3 glow o-70" href="https://www.linkedin.com/in/thomaspiart/" title="My LinkedIn's Profile" target="_blank" rel="noopener noreferrer"><i class="ic ic-linkedin"></i> </a><a class="dib mh3 glow o-70" href="https://twitter.com/tomap" title="My Twitter's Profile" target="_blank" rel="noopener noreferrer"><i class="ic ic-twitter"></i> </a><a class="dib mh3 glow o-70" href="/rss2.xml" title="My Rss's Profile" target="_blank" rel="noopener noreferrer"><i class="ic ic-rss"></i></a></footer></body></html>